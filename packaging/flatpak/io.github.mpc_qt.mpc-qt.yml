app-id: io.github.mpc_qt.mpc-qt
runtime: org.kde.Platform
runtime-version: '6.10'
sdk: org.kde.Sdk
command: mpc-qt
rename-icon: mpc-qt
finish-args:
  - --share=ipc
  - --share=network
# We support both Xwayland and Wayland (selectable in the Tweaks settings) because
# Wayland doesn't allow centering the window after we resize it
  - --socket=x11
  - --socket=wayland
  - --socket=pulseaudio
  - --device=dri
# These can't be :ro to access subtitles when file opened from the app
  - --filesystem=/media
  - --filesystem=/run/media
  - --filesystem=/mnt
  - --filesystem=xdg-desktop
  - --filesystem=xdg-documents
  - --filesystem=xdg-download
  - --filesystem=xdg-music
  - --filesystem=xdg-pictures
  - --filesystem=xdg-public-share
  - --filesystem=xdg-videos
  - --filesystem=xdg-run/gamescope-0:ro
  - --filesystem=xdg-run/pipewire-0:ro
  - --talk-name=org.freedesktop.ScreenSaver
  - --own-name=org.mpris.MediaPlayer2.MpcQt
  - --system-talk-name=org.freedesktop.UDisks2
# Access to home folder is needed for external subtitles and for downloaded mouse cursor
  - --filesystem=home:ro
  - --env=XCURSOR_PATH=/run/host/user-share/icons:/run/host/share/icons:~/.icons
cleanup:
  - '*.a'
  - '*.la'
  - /include
  - /lib/cmake
  - /lib/pkgconfig
  - /share/man
  - /share/hwdata
modules:
  - name: mpc-qt
    buildsystem: cmake-ninja
    sources:
      - type: git
        url: https://github.com/mpc-qt/mpc-qt.git
        branch: master
    modules:
